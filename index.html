<!DOCTYPE html>
<html lang="id">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>NeulinkNews | Portal Berita Video Nasional</title>

<!-- Firebase SDK -->
<script src="https://www.gstatic.com/firebasejs/10.11.0/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/10.11.0/firebase-firestore-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/10.11.0/firebase-auth-compat.js"></script>

<style>
*{margin:0;padding:0;box-sizing:border-box}
body{font-family:'Segoe UI',Tahoma,sans-serif;background:#0f172a;color:#e5e7eb;line-height:1.6;min-height:100vh;}
header{position:sticky;top:0;z-index:999;background:#020617;padding:15px 30px;display:flex;justify-content:space-between;align-items:center;border-bottom:2px solid #0EA5E9;flex-wrap:wrap;box-shadow:0 4px 20px rgba(14,165,233,0.3);}
.brand{display:flex;align-items:center;gap:12px;}
.brand img{height:45px;}
.brand-text h1{color:#0EA5E9;font-size:24px;font-weight:800;}
.tagline{font-size:11px;letter-spacing:1px;text-transform:uppercase;color:#38BDF8;}
nav{display:flex;flex-wrap:wrap;gap:10px;}
nav a{color:#e5e7eb;text-decoration:none;font-weight:500;}
nav a:hover{color:#38BDF8;cursor:pointer;}
.container{padding:40px 20px;max-width:1200px;margin:auto;}
.headline{text-align:center;margin-bottom:40px;}
.headline h2{font-size:28px;color:#0EA5E9;text-shadow:0 0 10px rgba(14,165,233,0.5);}
.news-grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(280px,1fr));gap:20px;}
.news-card{background:#1e293b;border-radius:12px;overflow:hidden;border:1px solid rgba(14,165,233,.6);box-shadow:0 5px 20px rgba(14,165,233,0.2);transition:.3s;}
.news-card:hover{transform:translateY(-5px);box-shadow:0 15px 40px rgba(14,165,233,.4);}
.news-card iframe, .news-card img{width:100%;height:200px;object-fit:cover;border:none;}
.news-content{padding:15px;}
.news-content h3{color:#38BDF8;font-size:18px;}
.news-content small{color:#94A3B8;}
.news-content p{margin-top:8px;font-size:14px;}
button{padding:6px 12px;border:none;border-radius:5px;cursor:pointer;font-size:13px;}
#login-panel,.cms-section{margin-top:30px;text-align:center;}
.cms-section form,#login-panel form{max-width:500px;margin:auto;display:flex;flex-direction:column;gap:8px;}
.cms-section input,#cms-form textarea,#login-panel input,select{padding:8px;border-radius:5px;border:1px solid #0EA5E9;background:#0f172a;color:#e5e7eb;width:100%;}
#logout-btn{background:#F43F5E;margin-top:10px;color:white;}
@media(max-width:768px){header{padding:15px 15px;flex-direction:column;text-align:center;} nav{justify-content:center;} .brand-text h1{font-size:20px;} .news-card iframe,.news-card img{height:180px;}}
</style>
</head>
<body>

<header>
<div class="brand">
<img src="img/neulink-logo-saja.png" alt="NeulinkNews Logo">
<div class="brand-text"><h1>NeulinkNews</h1><span class="tagline">for all everyone</span></div>
</div>
<nav>
<a href="#">Home</a>
<a href="https://www.youtube.com/@NeulinkNews" target="_blank">YouTube</a>
<a href="https://www.instagram.com/neulinknews/" target="_blank">Instagram</a>
<a href="https://www.tiktok.com/@neulinknews" target="_blank">TikTok</a>
<a id="cms-nav">CMS</a>
</nav>
</header>

<section class="container">
<div class="headline"><h2>NeulinkNews</h2><p>Portal berita berbasis video dari omnichannel resmi NeulinkNews</p></div>

 
<div class="news-grid">
<div class="news-card">
<iframe src="https://www.youtube.com/embed/videoseries?list=PLJZGZzMzNXvN6J9xKQD1IbqVearTOxJ_R" allowfullscreen></iframe>
<div class="news-content">
<h3>Berita Nasional Terkini</h3>
<small>YouTube • NeulinkNews</small>
<p>Liputan aktual isu nasional dan kebijakan publik.</p>
</div>
</div>

<div class="news-card">
<iframe src="https://www.youtube.com/embed/videoseries?list=PLJZGZzMzNXvPVn7dDA3PhUcsDJlyBj2VQ" allowfullscreen></iframe>
<div class="news-content">
<h3>Ekonomi & Bisnis</h3>
<small>YouTube • NeulinkNews</small>
<p>Analisis ekonomi, dunia usaha, dan UMKM.</p>
</div>
</div>

<div class="news-card">
<iframe src="https://www.youtube.com/embed/videoseries?list=PLJZGZzMzNXvMWu7T5fEB1u8MJ0qTU54VD" allowfullscreen></iframe>
<div class="news-content">
<h3>Opini & Filsafat Publik</h3>
<small>YouTube • NeulinkNews</small>
<p>Diskusi pemikiran kritis dan refleksi kebangsaan.</p>
</div>
</div>
</div> 
  
<div id="written-news-grid" class="news-grid"></div>

<!-- LOGIN PANEL -->
<div id="login-panel" style="display:none;">
<h3>Login Penulis/Admin</h3>
<form id="login-form">
<input type="email" id="login-email" placeholder="Email" required>
<input type="password" id="login-password" placeholder="Password" required>
<button type="submit">Login</button>
</form>
</div>

<!-- CMS PANEL -->
<div class="cms-section" style="display:none;">
<h3>CMS Panel</h3>
<form id="cms-form">
<input type="hidden" id="edit-id">
<input type="text" id="article-title" placeholder="Judul Artikel" required>
<select id="article-type" required>
<option value="" disabled selected>Jenis Berita</option>
<option value="Fakta">Fakta</option>
<option value="Opini">Opini</option>
<option value="Analisis">Analisis</option>
<option value="Laporan">Laporan</option>
</select>
<input type="text" id="article-video" placeholder="URL Video YouTube (embed link)">
<textarea id="article-content" placeholder="Isi Artikel" required></textarea>
<button type="submit">Tambah / Update Berita</button>
</form>
<button id="logout-btn">Logout</button>
</div>

<footer style="margin-top:50px;padding:20px;text-align:center;border-top:1px solid #0EA5E9;color:#94A3B8;">© 2025 NeulinkNews • Digital News Platform</footer>

<!-- MODAL READ ARTICLE -->
<div id="read-modal" style="display:none;position:fixed;top:0;left:0;width:100%;height:100%;background:rgba(0,0,0,0.9);z-index:9999;overflow-y:auto;padding:50px 20px;">
    <div style="max-width:800px;margin:auto;background:#0f172a;padding:30px;border-radius:10px;position:relative;">
        <span id="close-modal" style="position:absolute;top:15px;right:20px;font-size:24px;color:#f43f5e;cursor:pointer;">&times;</span>
        <h2 id="modal-title" style="color:#0EA5E9;margin-bottom:10px;"></h2>
        <small id="modal-author" style="color:#94A3B8;"></small>
        <div id="modal-image-container" style="margin-top:15px;"></div>
        <p id="modal-content" style="margin-top:15px;color:#e5e7eb;line-height:1.8;"></p>
        <div style="margin-top:20px;display:flex;gap:15px;flex-wrap:wrap;">
            <button id="share-whatsapp" style="background:#25D366;color:white;border:none;padding:8px 15px;border-radius:5px;cursor:pointer;">Share WhatsApp</button>
            <button id="share-twitter" style="background:#1DA1F2;color:white;border:none;padding:8px 15px;border-radius:5px;cursor:pointer;">Share Twitter</button>
            <button id="copy-link" style="background:#0EA5E9;color:white;border:none;padding:8px 15px;border-radius:5px;cursor:pointer;">Copy Link</button>
        </div>
    </div>
</div>

<script>

// ===== DATA =====
let articles = JSON.parse(localStorage.getItem("neulink_articles")) || [];
let users = JSON.parse(localStorage.getItem("neulink_users")) || [
    {username:"admin",password:"admin",role:"admin"},
    {username:"penulis1",password:"1234",role:"writer"}
];
let loggedUser = null;
  
  
// ===== FIREBASE CONFIG =====
const firebaseConfig = {
  apiKey: "API_KEY_ANDA",
  authDomain: "PROJECT_ID.firebaseapp.com",
  projectId: "PROJECT_ID",
  storageBucket: "PROJECT_ID.appspot.com",
  messagingSenderId: "SENDER_ID",
  appId: "APP_ID"
};
firebase.initializeApp(firebaseConfig);
const db = firebase.firestore();
const auth = firebase.auth();
  

// ===== DOM =====
const newsGrid = document.getElementById("written-news-grid");
const loginPanel = document.getElementById("login-panel");
const loginForm = document.getElementById("login-form");
const cmsPanel = document.querySelector(".cms-section");
const cmsForm = document.getElementById("cms-form");
const logoutBtn = document.getElementById("logout-btn");
const cmsNav = document.getElementById("cms-nav");
let loggedUser = null;

// ===== FUNCTIONS =====
function renderArticles() {
    newsGrid.innerHTML = "";
    db.collection("articles").orderBy("timestamp","desc").get().then(snapshot=>{
        if(snapshot.empty){newsGrid.innerHTML="<p style='opacity:.7'>Belum ada artikel.</p>";return;}
        snapshot.forEach(doc=>{
            const article = doc.data();
            const card = document.createElement("div");
            card.className="news-card";
            let adminButtons = "";
            if(loggedUser){
                if(loggedUser.role==="admin" || article.author===loggedUser.email){
                    adminButtons = `<button onclick="editArticle('${doc.id}')">Edit</button>
                    <button onclick="deleteArticle('${doc.id}')">Hapus</button>`;
                }
            }
            card.innerHTML = `${article.video?`<iframe src="${article.video}" allowfullscreen></iframe>`:""}
            <div class="news-content">
            <h3>${article.title}</h3>
            <small>${article.type} • ${article.author}</small>
            <p>${article.content.substring(0,120)}...</p>
            <div style="margin-top:10px;display:flex;gap:5px;flex-wrap:wrap;">
            ${adminButtons}
            </div>
            </div>`;
            newsGrid.appendChild(card);
        });
    });
}

// ===== CMS FUNCTIONS =====
cmsForm.addEventListener("submit", e=>{
    e.preventDefault();
    const editId = document.getElementById("edit-id").value;
    const articleData = {
        title: document.getElementById("article-title").value,
        type: document.getElementById("article-type").value,
        video: document.getElementById("article-video").value,
        content: document.getElementById("article-content").value,
        author: loggedUser.email,
        timestamp: firebase.firestore.FieldValue.serverTimestamp()
    };
    if(editId===""){
        db.collection("articles").add(articleData).then(()=>{renderArticles(); cmsForm.reset(); document.getElementById("edit-id").value="";});
    }else{
        db.collection("articles").doc(editId).update(articleData).then(()=>{renderArticles(); cmsForm.reset(); document.getElementById("edit-id").value="";});
    }
});

// ===== EDIT & DELETE =====
function editArticle(id){
    db.collection("articles").doc(id).get().then(doc=>{
        if(doc.exists){
            const article = doc.data();
            document.getElementById("article-title").value=article.title;
            document.getElementById("article-type").value=article.type;
            document.getElementById("article-video").value=article.video;
            document.getElementById("article-content").value=article.content;
            document.getElementById("edit-id").value=id;
            cmsPanel.style.display="block";
        }
    });
}

function deleteArticle(id){
    if(confirm("Apakah yakin ingin menghapus artikel ini?")){
        db.collection("articles").doc(id).delete().then(()=>{renderArticles();});
    }
}

// ===== LOGIN / LOGOUT =====
loginForm.addEventListener("submit", e=>{
    e.preventDefault();
    const email = document.getElementById("login-email").value;
    const password = document.getElementById("login-password").value;
    auth.signInWithEmailAndPassword(email,password)
    .then(userCredential=>{
        loggedUser = {email:userCredential.user.email, role: email==="admin@neulink.com"?"admin":"writer"};
        loginPanel.style.display="none";
        cmsPanel.style.display="block";
        renderArticles();
    })
    .catch(err=>alert(err.message));
});

logoutBtn.addEventListener("click", ()=>{
    auth.signOut().then(()=>{
        loggedUser=null;
        cmsPanel.style.display="none";
        loginPanel.style.display="block";
        renderArticles();
    });
});

// ===== CMS NAV CLICK =====
cmsNav.addEventListener("click", ()=>{
    if(loggedUser){
        cmsPanel.style.display=cmsPanel.style.display==="none"?"block":"none";
        loginPanel.style.display="none";
    }else{
        loginPanel.style.display=loginPanel.style.display==="none"?"block":"none";
        cmsPanel.style.display="none";
    }
});

// ===== REALTIME LISTENER =====
db.collection("articles").orderBy("timestamp","desc").onSnapshot(()=>{renderArticles();});
</script>
</body>
</html>

